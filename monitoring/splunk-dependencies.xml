<?xml version='1.0' encoding='utf-8'?>
<dashboard>
  <label>Membership User API Dependencies</label>

<!-- Janrain client -->
  <row>
    <chart>
      <searchString>host=ftweb03400-lvpr-uk-int source=/var/log/apps/userapi/userapi.log event="jerseyClientResponseTime" method="POST" uri_path="/entity*" | eval elapsed_ms=elapsed_ns/1000000 | timechart span=10m perc99(elapsed_ms) as 99th_percentile, perc95(elapsed_ms) as 95th_percentile</searchString>
      <title>User API 01 Janrain POST latency</title>
      <earliestTime>-1h</earliestTime>
      <latestTime>now</latestTime>
      <option name="charting.axisLabelsY.majorUnit"/>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisTitleY.text">Latency (ms)</option>
      <option name="charting.chart">area</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.primaryAxisTitle.text"/>
      <option name="charting.secondaryAxisTitle.text"/>
      <option name="count">10</option>
      <option name="displayRowNumbers">true</option>
    </chart>
    <chart>
      <searchString>host=ftweb03401-lvpr-uk-int source=/var/log/apps/userapi/userapi.log event="jerseyClientResponseTime" method="POST" uri_path="/entity*" | eval elapsed_ms=elapsed_ns/1000000 | timechart span=10m perc99(elapsed_ms) as 99th_percentile, perc95(elapsed_ms) as 95th_percentile</searchString>
      <title>User API 02 Janrain POST latency</title>
      <earliestTime>-1h</earliestTime>
      <latestTime>now</latestTime>
      <option name="charting.axisLabelsY.majorUnit"/>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisTitleY.text">Latency (ms)</option>
      <option name="charting.chart">area</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.primaryAxisTitle.text"/>
      <option name="charting.secondaryAxisTitle.text"/>
      <option name="count">10</option>
      <option name="displayRowNumbers">true</option>
    </chart>
    <chart>
      <searchString>source=/var/log/apps/userapi/userapi.log event="jerseyClientResponseTime" method="POST" uri_path="/entity*" | timechart span=1m count by host</searchString>
      <title>User API Janrain POST throughput</title>
      <earliestTime>-1h</earliestTime>
      <latestTime>now</latestTime>
      <option name="charting.axisLabelsY.majorUnit"/>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisTitleY.text">calls/minute</option>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.primaryAxisTitle.text"/>
      <option name="charting.secondaryAxisTitle.text"/>
      <option name="count">10</option>
      <option name="displayRowNumbers">true</option>
    </chart>
  </row>
  
  <!-- Kafka  -->
  <row>
    <chart>
      <searchString>source=/var/log/apps/userapi/userapi.log event="kafkaMessageReceived" | eval elapsed_ms=elapsed_ns/1000000 | timechart span=10m perc99(elapsed_ms) as 99th_percentile, perc95(elapsed_ms) as 95th_percentile</searchString>
      <title>User API Kafka message reception latency (end to end)</title>
      <earliestTime>-1h</earliestTime>
      <latestTime>now</latestTime>
      <option name="charting.axisLabelsY.majorUnit"/>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisTitleY.text">Latency (ms)</option>
      <option name="charting.chart">area</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.primaryAxisTitle.text"/>
      <option name="charting.secondaryAxisTitle.text"/>
      <option name="count">10</option>
      <option name="displayRowNumbers">true</option>
    </chart>
    <chart>
      <searchString>source=/var/log/apps/userapi/userapi.log event="kafkaMessageSent" | eval elapsed_ms=elapsed_ns/1000000 | timechart span=10m perc99(elapsed_ms) as 99th_percentile, perc95(elapsed_ms) as 95th_percentile</searchString>
      <title>User API Kafka message send latency</title>
      <earliestTime>-1h</earliestTime>
      <latestTime>now</latestTime>
      <option name="charting.axisLabelsY.majorUnit"/>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisTitleY.text">Latency (ms)</option>
      <option name="charting.chart">area</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.primaryAxisTitle.text"/>
      <option name="charting.secondaryAxisTitle.text"/>
      <option name="count">10</option>
      <option name="displayRowNumbers">true</option>
    </chart>
    <chart>
      <searchString>source=/var/log/apps/userapi/userapi.log event="kafkaMessageReceived" | timechart span=1m count by host</searchString>
      <title>User API Kafka message receive throughput</title>
      <earliestTime>-1h</earliestTime>
      <latestTime>now</latestTime>
      <option name="charting.axisLabelsY.majorUnit"/>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisTitleY.text">calls/minute</option>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.primaryAxisTitle.text"/>
      <option name="charting.secondaryAxisTitle.text"/>
      <option name="count">10</option>
      <option name="displayRowNumbers">true</option>
    </chart>
  </row>
  <row>
    <chart>
      <searchString>source=/var/log/apps/userapi/userapi.log event="kafkaMessageSent" | timechart span=1m count by host</searchString>
      <title>User API Kafka message send throughput</title>
      <earliestTime>-1h</earliestTime>
      <latestTime>now</latestTime>
      <option name="charting.axisLabelsY.majorUnit"/>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisTitleY.text">calls/minute</option>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.primaryAxisTitle.text"/>
      <option name="charting.secondaryAxisTitle.text"/>
      <option name="count">10</option>
      <option name="displayRowNumbers">true</option>
    </chart>
  </row>
  
  <!-- Cassandra -->
  <row>
    <chart>
      <searchString>host=ftweb03400-lvpr-uk-int source=/var/log/apps/userapi/userapi.log event="cassandraStatementExecuted" | eval elapsed_ms=elapsed_ns/1000000 | timechart span=10m perc99(elapsed_ms) as 99th_percentile, perc95(elapsed_ms) as 95th_percentile</searchString>
      <title>User API 01 Cassandra call latency</title>
      <earliestTime>-1h</earliestTime>
      <latestTime>now</latestTime>
      <option name="charting.axisLabelsY.majorUnit"/>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisTitleY.text">Latency (ms)</option>
      <option name="charting.chart">area</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.primaryAxisTitle.text"/>
      <option name="charting.secondaryAxisTitle.text"/>
      <option name="count">10</option>
      <option name="displayRowNumbers">true</option>
    </chart>
    <chart>
      <searchString>host=ftweb03401-lvpr-uk-int source=/var/log/apps/userapi/userapi.log event="cassandraStatementExecuted" | eval elapsed_ms=elapsed_ns/1000000 | timechart span=10m perc99(elapsed_ms) as 99th_percentile, perc95(elapsed_ms) as 95th_percentile</searchString>
      <title>User API 02 Cassandra call latency</title>
      <earliestTime>-1h</earliestTime>
      <latestTime>now</latestTime>
      <option name="charting.axisLabelsY.majorUnit"/>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisTitleY.text">Latency (ms)</option>
      <option name="charting.chart">area</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.primaryAxisTitle.text"/>
      <option name="charting.secondaryAxisTitle.text"/>
      <option name="count">10</option>
      <option name="displayRowNumbers">true</option>
    </chart>
    <chart>
      <searchString>source=/var/log/apps/userapi/userapi.log event="cassandraStatementExecuted" | timechart span=1m count by host</searchString>
      <title>User API Cassandra call throughput</title>
      <earliestTime>-1h</earliestTime>
      <latestTime>now</latestTime>
      <option name="charting.axisLabelsY.majorUnit"/>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisTitleY.text">calls/minute</option>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">connect</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.primaryAxisTitle.text"/>
      <option name="charting.secondaryAxisTitle.text"/>
      <option name="count">10</option>
      <option name="displayRowNumbers">true</option>
    </chart>
  </row>
</dashboard>